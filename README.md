# News Content Generator

This project is designed to fetch news contents from various RSS feeds, extract topics from the contents, and provide
access to the generated content through an API. The project is composed of two main services:

- **Worker Service**: Responsible for fetching news contents and extracting topics every minute.
- **App Service (API)**: Provides an API to access the fetched and processed news contents. Content can be filtered with `topic, start_date, end_date`.

## Getting Started

### Prerequisites

- [Docker](https://www.docker.com/get-started)
- [Docker Compose](https://docs.docker.com/compose/install/)

### 1. Environment Variables

- cd to `./container/envs`
- To add or update RSS feed URL, change the value of `RSS_FEED_URLS` as a comma separated value.
    ```bash
      RSS_FEED_URLS=http://feeds.bbci.co.uk/news/rss.xml,https://timesofindia.indiatimes.com/rssfeeds/-2128936835.cms 
    ```

### 2. Running the Worker (News Content Generator)

The **worker** service fetches news contents from the configured RSS feeds and extracts topics from them. The worker is
set up to run every minute using a cron job.

To start the worker service, run the following command:

- cd to `container/envs`
- run command `docker compose up worker`

This command will:

- Use the URLs provided in the `app.env` file to fetch RSS feed data.
- Extract topics from the news contents using a keyword extraction technique.
- Store the fetched contents and extracted topics in a JSON file.
- The worker service is scheduled to run every minute.

### 3. Running the API

The **app** service exposes an API to access the stored news contents and topics generated by the worker.

To start the app service, run:

- cd to `container/envs`
- run command `docker compose up -d app`

This will:

- Start the API service and bind it to the port specified in the `container/compose.yml` (e.g.,
  `http://localhost:3000`).
- The **worker** service runs every minute to fetch new contents and store them in the `/codes/src/storage` folder.
- The **app** service runs the API, which can be accessed at `http://localhost:3000` (or the configured port).

### 5. Accessing the Generated Content

Once both the **worker** and **app** services are running, you can access the API by navigating to
`http://localhost:3000/api/v1/news`. The API will provide access to the latest news contents and their extracted topics.

- Sample Curl
    ```
    curl --location 'http://localhost:3000/api/v1/news?topic=student&start_date=2024-10-01&end_date=2024-10-03'
    ```

### 6. Stopping the Services

To stop both the worker and app services, use the following command:

```
docker compose down
```

This will stop all running services and clean up the containers.

---
